/* ==========================================================================
   GrowGram — Base Styles
   File: /web/styles/base.css
   Depends on: /web/styles/token.css  (@layer tokens)
   Purpose: Reset + Normalize + Base Typo + Accessibility + Forms
   ========================================================================== */

@layer base {
  /* ----------------------------------------------------
     0) Reset / Normalize (modern, minimal)
     ---------------------------------------------------- */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  :where(html) {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    hanging-punctuation: first last;
    color-scheme: dark light; /* actual colors come from tokens */
  }

  :where(body) {
    margin: 0;
    min-height: 100dvh;
    background: var(--color-bg);
    color: var(--color-text);
    font-family: var(--ff-sans);
    font-size: var(--fs-md);
    line-height: var(--lh-base);
    letter-spacing: 0.2px;
  }

  :where(h1, h2, h3, h4, h5, h6, p, figure, blockquote, dl, dd) {
    margin: 0;
  }

  :where(ul[role="list"], ol[role="list"]) {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  :where(img, svg, video, canvas, audio, iframe, embed, object) {
    display: block;
    max-width: 100%;
  }
  img { height: auto; }

  :where(button, input, textarea, select) {
    font: inherit;
    color: inherit;
    background: none;
    border: none;
    outline: none;
  }

  :where(a) {
    color: inherit;
    text-decoration: none;
  }

  /* ----------------------------------------------------
     1) Typography defaults (fluid scale from tokens)
     ---------------------------------------------------- */
  h1 { font-size: var(--fs-xxl); line-height: var(--lh-tight); font-weight: 900; letter-spacing: var(--ls-tight); }
  h2 { font-size: var(--fs-xl);  line-height: var(--lh-tight); font-weight: 900; letter-spacing: var(--ls-tight); }
  h3 { font-size: var(--fs-lg);  line-height: 1.2;            font-weight: 800; }
  h4 { font-size: 1.1rem;        line-height: 1.25;           font-weight: 800; }
  h5 { font-size: 1rem;          line-height: 1.25;           font-weight: 800; }
  h6 { font-size: .95rem;        line-height: 1.25;           font-weight: 800; }

  p  { margin-block: var(--sp-3); }
  .lead { font-size: clamp(1.05rem, 1rem + .35vw, 1.3rem); color: color-mix(in oklab, var(--color-text) 85%, #fff); }

  small { font-size: var(--fs-sm); }
  .mono { font-family: var(--ff-mono); }

  /* Links */
  a {
    color: var(--color-primary);
    transition: color var(--dur-base) var(--ease-smooth), opacity var(--dur-base) var(--ease-smooth);
  }
  a:hover { color: var(--color-primary-600); }
  a:active { opacity: .9; }
  a.underline { text-decoration: underline; text-underline-offset: 3px; text-decoration-thickness: 2px; }

  /* Code & kbd */
  code, kbd, samp {
    font-family: var(--ff-mono);
    font-size: .92em;
    background: var(--color-surface-2);
    border: 1px solid var(--color-border);
    padding: .15rem .35rem;
    border-radius: .35rem;
  }
  pre {
    margin: var(--sp-4) 0;
    padding: var(--sp-4);
    font-family: var(--ff-mono);
    font-size: .92rem;
    line-height: 1.55;
    color: var(--color-text);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-2);
    overflow: auto;
  }
  pre code { background: transparent; border: 0; padding: 0; }

  blockquote {
    margin: var(--sp-4) 0;
    padding: var(--sp-3) var(--sp-4);
    border-left: 4px solid color-mix(in oklab, var(--color-primary) 55%, #000);
    background: color-mix(in oklab, var(--color-primary) 8%, transparent);
    border-radius: .25rem;
    color: color-mix(in oklab, var(--color-text) 90%, #fff);
  }

  hr {
    border: 0;
    height: 1px;
    background: var(--color-border);
    margin-block: var(--sp-5);
  }

  /* ----------------------------------------------------
     2) Selection, Scrollbars, Focus, Reduced Motion
     ---------------------------------------------------- */
  ::selection {
    background: color-mix(in oklab, var(--color-primary) 45%, transparent);
    color: var(--color-text-strong);
  }

  /* (WebKit/Chromium only – progressive) */
  *::-webkit-scrollbar { width: 10px; height: 10px; }
  *::-webkit-scrollbar-track { background: var(--color-surface-2); }
  *::-webkit-scrollbar-thumb {
    background: color-mix(in oklab, var(--color-primary) 40%, var(--color-surface));
    border-radius: 999px;
    border: 2px solid var(--color-surface-2);
  }
  *::-webkit-scrollbar-thumb:hover {
    background: color-mix(in oklab, var(--color-primary) 60%, var(--color-surface));
  }

  :focus-visible {
    outline: 3px solid var(--state-focus-ring);
    outline-offset: 2px;
  }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 1ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 1ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* ----------------------------------------------------
     3) Layout atoms
     ---------------------------------------------------- */
  .container {
    width: min(100%, var(--container-lg));
    margin-inline: auto;
    padding-inline: var(--sp-4);
  }
  .container.is-narrow { width: min(100%, var(--container-sm)); }
  .container.is-wide   { width: min(100%, var(--container-xl)); }

  .section { padding-block: var(--sp-8); }
  .section.is-tight { padding-block: var(--sp-6); }
  .section.is-loose { padding-block: var(--sp-9); }

  /* ----------------------------------------------------
     4) Images, media, figures
     ---------------------------------------------------- */
  figure { margin: 0; }
  figcaption {
    margin-top: .4rem;
    color: var(--color-text-muted);
    font-size: var(--fs-sm);
  }
  .media-rounded { border-radius: var(--radius-2); overflow: hidden; }
  .media-shadow  { box-shadow: var(--shadow-1); }

  /* ----------------------------------------------------
     5) Forms – sane defaults
     ---------------------------------------------------- */
  label {
    display: inline-block;
    margin-bottom: .45rem;
    font-weight: 700;
    font-size: .95rem;
  }

  .input,
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  input[type="number"],
  input[type="url"],
  input[type="tel"],
  input[type="date"],
  select,
  textarea {
    width: 100%;
    background: var(--input-bg);
    color: var(--input-fg);
    border: 1px solid var(--input-border);
    border-radius: var(--input-radius);
    padding: .8rem 1rem;
    transition: border-color var(--dur-base) var(--ease-smooth), box-shadow var(--dur-base) var(--ease-smooth), background-color var(--dur-base) var(--ease-smooth);
    appearance: none;
  }
  input::placeholder,
  textarea::placeholder { color: var(--input-placeholder); }

  input:focus,
  select:focus,
  textarea:focus,
  .input:focus {
    border-color: var(--input-focus-border);
    box-shadow: var(--input-focus-ring);
    outline: none;
  }

  fieldset {
    min-width: 0;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-2);
    padding: var(--sp-4);
  }
  legend {
    padding: 0 .3rem;
    font-weight: 800;
  }

  /* Checkbox/Radio – minimal alignment */
  input[type="checkbox"],
  input[type="radio"] {
    inline-size: 1.05rem;
    block-size: 1.05rem;
    accent-color: var(--color-primary);
  }

  /* Buttons (base only; component variants in components.css) */
  button,
  .btn-reset {
    background: none;
    border: 0;
    padding: 0;
    color: inherit;
    cursor: pointer;
  }

  .btn-base {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: .6rem;
    padding: .9rem 1.2rem;
    border-radius: var(--btn-radius);
    font-weight: 800;
    letter-spacing: .3px;
    background: var(--btn-bg);
    color: var(--btn-fg);
    box-shadow: var(--btn-shadow);
    transition: transform var(--dur-fast) var(--ease-bounce), box-shadow var(--dur-base) var(--ease-smooth), background var(--dur-base) var(--ease-smooth), filter var(--dur-base) var(--ease-smooth);
  }
  .btn-base:hover {
    background: var(--btn-bg-hover);
    box-shadow: 0 8px 26px rgba(76,175,80,.28), inset 0 1px 0 rgba(255,255,255,.35);
    transform: translateY(-1px);
  }
  .btn-base:active { transform: translateY(0); }
  .btn-base:disabled, .btn-base[aria-disabled="true"] {
    opacity: var(--opacity-disabled);
    cursor: not-allowed;
  }

  /* ----------------------------------------------------
     6) Lists & tables
     ---------------------------------------------------- */
  ul, ol { padding-left: 1.2rem; margin-block: var(--sp-3); }
  li + li { margin-top: .35rem; }

  table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-2);
    overflow: hidden;
  }
  thead th {
    text-align: left;
    font-weight: 800;
    font-size: .92rem;
    background: var(--color-surface-2);
  }
  th, td {
    padding: .9rem 1rem;
    border-bottom: 1px solid var(--color-border);
  }
  tbody tr:hover {
    background: color-mix(in oklab, var(--color-primary) 6%, transparent);
  }
  tbody tr:last-child td { border-bottom: 0; }

  /* ----------------------------------------------------
     7) Helper text colors & muted states
     ---------------------------------------------------- */
  .text-muted { color: var(--color-text-muted); }
  .text-primary { color: var(--color-primary); }
  .text-accent { color: var(--color-accent); }
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0,0,0,0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  /* ----------------------------------------------------
     8) Media queries – small ergonomic adjustments
     ---------------------------------------------------- */
  @media (max-width: 960px) {
    .container { padding-inline: var(--sp-3); }
    .btn-base { width: 100%; }
  }
}
/* end @layer base */