/* ==========================================================================
   GrowGram — Scene / Page Styles
   File: /web/styles/scene.css
   Depends on: token.css, base.css, layout.css, components.css
   Purpose: Hero, Feature-Showcase, Deko-Effekte, Roadmap, CTA-Band,
            Scroll-Linked-Animations (progressive enhancement)
   ========================================================================== */

@layer scene {

  /* =====================================================
     0) Keyframes (scene-spezifisch, s-* Präfix)
     ===================================================== */
  @keyframes s-float   { 0%,100%{transform:translate3d(0,0,0)} 50%{transform:translate3d(0,-6px,0)} }
  @keyframes s-orb     { 0%,100%{transform:translate3d(0,0,0) scale(1)} 50%{transform:translate3d(10px,-8px,0) scale(1.04)} }
  @keyframes s-shimmer { 0%{background-position:-200% 0} 100%{background-position:200% 0} }
  @keyframes s-reveal  { from{opacity:0; transform:translate3d(0,14px,0)} to{opacity:1; transform:translate3d(0,0,0)} }
  @keyframes s-pop     { 0%{opacity:0; transform:scale(.96)} 100%{opacity:1; transform:scale(1)} }
  @keyframes s-marquee { 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }
  @keyframes s-hue     { 0%{filter:hue-rotate(0)} 100%{filter:hue-rotate(360deg)} }

  /* =====================================================
     1) HERO
     ===================================================== */
  .hero {
    position: relative;
    padding-block: clamp(5rem, 8vw, 9rem);
    background:
      radial-gradient(900px 500px at 10% 0%, var(--orb-green) 0%, transparent 60%),
      radial-gradient(900px 500px at 100% 10%, var(--orb-orange) 0%, transparent 60%),
      var(--color-bg);
    overflow: clip;
    isolation: isolate;
  }

  .hero--grid {
    /* feines Grid, mit weichem Mask-Fade */
    --c: color-mix(in oklab, var(--color-border) 70%, transparent);
    background:
      linear-gradient(transparent, transparent) padding-box,
      repeating-linear-gradient(0deg, var(--c), var(--c) 1px, transparent 1px, transparent 28px),
      repeating-linear-gradient(90deg, var(--c), var(--c) 1px, transparent 1px, transparent 28px),
      radial-gradient(900px 500px at 10% 0%, var(--orb-green) 0%, transparent 60%),
      radial-gradient(900px 500px at 100% 10%, var(--orb-orange) 0%, transparent 60%),
      var(--color-bg);
    -webkit-mask-image: radial-gradient(1200px 700px at 50% 0%, #000 40%, transparent 95%);
            mask-image: radial-gradient(1200px 700px at 50% 0%, #000 40%, transparent 95%);
  }

  .hero__inner {
    display: grid;
    grid-template-columns: 1.35fr 1fr;
    align-items: center;
    gap: var(--sp-6);
  }
  @media (max-width: 960px) {
    .hero__inner { grid-template-columns: 1fr; }
  }

  .hero__kicker {
    color: var(--color-accent);
    font-weight: 900;
    letter-spacing: .15em;
    text-transform: uppercase;
    font-size: .8rem;
    display: inline-block;
    margin-bottom: .75rem;
  }
  .hero__title {
    font-size: clamp(2.2rem, 2rem + 2.4vw, 4.2rem);
    line-height: .98;
    font-weight: 900;
    letter-spacing: var(--ls-tight);
    margin-bottom: var(--sp-3);
  }
  .hero__subtitle {
    font-size: clamp(1.05rem, 1rem + .4vw, 1.35rem);
    color: #cfd6d3;
    max-width: 60ch;
    margin-bottom: var(--sp-4);
  }
  .hero__cta { display: flex; gap: .9rem; flex-wrap: wrap; }

  /* Hero Visual: 3D-Tilt/Float (CSS only) */
  .hero__visual {
    position: relative;
    perspective: 1000px;
    contain: paint layout style;
  }
  .hero__card {
    background: linear-gradient(180deg, var(--color-surface), var(--color-surface-2));
    border: 1px solid var(--color-border);
    border-radius: var(--radius-3);
    box-shadow: var(--shadow-2);
    padding: var(--sp-5);
    transform-style: preserve-3d;
    animation: s-pop var(--dur-base) var(--ease-smooth), s-float 7s ease-in-out infinite;
  }
  .hero__ring {
    position: absolute; inset: -12%;
    border-radius: 999rem;
    background: radial-gradient(60% 60% at 50% 50%, rgba(76,175,80,.18), transparent 70%);
    filter: blur(10px);
    z-index: -1;
    animation: s-orb 14s var(--ease-smooth) infinite;
  }
  .hero__shimmer {
    position: absolute; inset: 0;
    pointer-events: none;
    background: linear-gradient(115deg, rgba(255,255,255,.05), rgba(255,255,255,0), rgba(255,255,255,.08));
    mix-blend-mode: overlay;
    -webkit-mask-image: linear-gradient(#000, transparent 60%);
            mask-image: linear-gradient(#000, transparent 60%);
    animation: s-shimmer 4s linear infinite;
    background-size: 300% 100%;
  }

  /* Sparkle dots */
  .hero__sparkles {
    position: absolute; inset: 0;
    background:
      radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,.35) 0, transparent 60%),
      radial-gradient(2px 2px at 80% 30%, rgba(255,255,255,.25) 0, transparent 60%),
      radial-gradient(2px 2px at 40% 70%, rgba(255,255,255,.20) 0, transparent 60%);
    mix-blend-mode: screen;
    pointer-events: none;
    animation: s-float 12s ease-in-out infinite;
  }

  /* =====================================================
     2) FEATURE SECTION / SHOWCASE
     ===================================================== */
  .features {
    position: relative;
  }
  .feature {
    position: relative;
    background: linear-gradient(180deg, var(--color-surface), var(--color-surface-2));
    border: 1px solid var(--color-border);
    border-radius: var(--radius-2);
    box-shadow: var(--shadow-1);
    padding: var(--sp-5);
    transition: transform var(--dur-base) var(--ease-smooth),
                box-shadow var(--dur-base) var(--ease-smooth),
                border-color var(--dur-base) var(--ease-smooth);
  }
  .feature:hover {
    transform: translateY(-4px);
    border-color: color-mix(in oklab, var(--color-primary) 25%, var(--color-border));
    box-shadow: var(--shadow-2);
  }
  .feature__icon {
    width: 46px; height: 46px; border-radius: .8rem;
    background: var(--grad-primary);
    box-shadow: var(--glow-primary);
    display: grid; place-items: center;
    margin-bottom: var(--sp-3);
  }
  .feature__title { font-weight: 900; margin-bottom: .35rem; letter-spacing: var(--ls-tight); }
  .feature__text  { color: var(--color-text-muted); }

  /* Showcase cards with subtle 3D tilt on hover (no JS) */
  .tilt {
    transform-style: preserve-3d;
    transition: transform var(--dur-base) var(--ease-smooth), box-shadow var(--dur-base) var(--ease-smooth);
  }
  @media (pointer:fine) {
    .tilt:hover { transform: perspective(900px) rotateX(4deg) rotateY(-6deg) translateY(-2px); }
  }

  /* =====================================================
     3) MARQUEE (Logo/Tag-Laufband)
     ===================================================== */
  .marquee {
    position: relative;
    overflow: hidden;
    -webkit-mask-image: linear-gradient(90deg, transparent, #000 10%, #000 90%, transparent);
            mask-image: linear-gradient(90deg, transparent, #000 10%, #000 90%, transparent);
  }
  .marquee__track {
    display: flex;
    gap: var(--sp-6);
    width: max-content;
    animation: s-marquee var(--speed, 25s) linear infinite;
  }
  .marquee__item {
    display: inline-flex; align-items: center; gap: .6rem;
    padding: .6rem 1rem; border-radius: var(--radius-round);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    white-space: nowrap;
  }

  /* =====================================================
     4) ROADMAP / TIMELINE
     ===================================================== */
  .roadmap {
    position: relative;
    display: grid;
    gap: var(--sp-6);
    padding-left: 1.6rem;
  }
  .roadmap::before {
    content: "";
    position: absolute; left: .35rem; top: 0; bottom: 0; width: 2px;
    background: linear-gradient(180deg, color-mix(in oklab, var(--color-primary) 60%, transparent), transparent);
    border-radius: 2px;
  }
  .milestone {
    position: relative;
    background: linear-gradient(180deg, var(--color-surface), var(--color-surface-2));
    border: 1px solid var(--color-border);
    border-radius: var(--radius-2);
    box-shadow: var(--shadow-1);
    padding: var(--sp-4);
    animation: s-reveal var(--dur-slow) var(--ease-smooth) both;
  }
  .milestone::before {
    content: "";
    position: absolute; left: -1.15rem; top: .9rem;
    width: 12px; height: 12px; border-radius: 999rem;
    background: var(--color-primary);
    box-shadow: 0 0 0 4px color-mix(in oklab, var(--color-primary) 25%, transparent);
  }
  .milestone__title { font-weight: 900; margin-bottom: .25rem; }
  .milestone__meta  { color: var(--color-text-muted); font-size: .9rem; margin-bottom: .5rem; }

  .milestone.is-active {
    border-color: color-mix(in oklab, var(--color-primary) 40%, var(--color-border));
    box-shadow: var(--shadow-2), 0 0 0 3px color-mix(in oklab, var(--color-primary) 12%, transparent);
  }

  /* =====================================================
     5) CTA-BAND
     ===================================================== */
  .cta-band {
    position: relative;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-3);
    padding: var(--sp-6);
    background:
      radial-gradient(80% 80% at 30% 30%, color-mix(in oklab, var(--color-primary) 12%, transparent), transparent 60%),
      radial-gradient(80% 80% at 100% 50%, color-mix(in oklab, var(--color-accent) 10%, transparent), transparent 60%),
      linear-gradient(180deg, var(--color-surface), var(--color-surface-2));
    box-shadow: var(--shadow-2);
    overflow: clip;
  }
  .cta-band__ring {
    position: absolute; inset: -20%;
    border-radius: 9999px;
    background: radial-gradient(50% 50% at 50% 50%, rgba(76,175,80,.18), transparent 70%);
    filter: blur(12px);
    z-index: -1;
    animation: s-orb 16s var(--ease-smooth) infinite;
  }
  .cta-band__inner { display: grid; gap: var(--sp-4); align-items: center; }
  @media (min-width: 900px) {
    .cta-band__inner { grid-template-columns: 1fr auto; }
  }

  /* =====================================================
     6) FOOTER ACCENT
     ===================================================== */
  .footer-accent {
    position: relative;
    border-top: 1px solid var(--color-border);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
  }
  .footer-accent::before {
    content: "";
    position: absolute; left: 0; right: 0; top: 0; height: 2px;
    background: var(--grad-primary);
    opacity: .6;
  }

  /* =====================================================
     7) SCROLL-LINKED ANIMATIONS (Progressive)
     ===================================================== */
  @supports (animation-timeline: scroll()) {

    /* Timeline entlang des Dokuments */
    @scroll-timeline page-scroll {
      source: auto;
      orientation: block;
      scroll-offsets: 0%, 100%;
    }

    /* Hero Visual parallax in/out */
    .hero__card {
      animation: s-pop 1ms linear both;
      animation-timeline: page-scroll;
      animation-range: entry 0% cover 20%;
    }

    /* Linie in der Navbar wächst bei Scroll */
    .navbar::after {
      content: "";
      position: absolute; left: 0; right: 0; bottom: -1px; height: 2px;
      background: var(--grad-primary);
      transform-origin: left;
      transform: scaleX(0);
      animation: navbarLine 1ms linear both;
      animation-timeline: page-scroll;
      animation-range: 5% 22%;
    }
    @keyframes navbarLine { to { transform: scaleX(1); } }

    /* Reveal-Utilities für Sections */
    .scroll-fade {
      opacity: .001;
      animation: s-reveal 1ms linear both;
      animation-timeline: page-scroll;
      animation-range: entry 20% cover 35%;
    }
    .scroll-rise {
      opacity: .001;
      transform: translateY(14px);
      animation: s-reveal 1ms linear both;
      animation-timeline: page-scroll;
      animation-range: entry 15% cover 40%;
    }
  }

  /* =====================================================
     8) REDUCED MOTION
     ===================================================== */
  @media (prefers-reduced-motion: reduce) {
    .hero__card, .hero__ring, .hero__sparkles, .hero__shimmer,
    .marquee__track, .cta-band__ring { animation: none !important; }
  }

}
/* end @layer scene */